# はじめに

![logo.png](../../../blocklets/core/screenshots/logo.png)

AIGNE Hubは、複数の大規模言語モデル（LLM）およびAIGCプロバイダーへの接続管理を効率化するために設計された統合AIゲートウェイです。これは一元化されたコントロールプレーンとして機能し、様々なAIサービスにまたがる個別のAPIキーの取り扱い、使用状況の追跡、請求管理の複雑さを抽象化します。AIGNEフレームワーク上で[Blocklet](https://blocklet.io)として構築されており、企業内での利用と公開サービス提供の両方に向けた、堅牢で自己ホスト可能なソリューションを提供します。

運用上の観点から、AIGNE HubはすべてのAI駆動型アプリケーションに対して単一で一貫性のあるエンドポイントを提供し、ネットワーク構成、セキュリティポリシー、モニタリングを簡素化します。

## システムアーキテクチャ

このシステムは、信頼性とスケーラビリティを考慮して設計されており、最新のタイプセーフな技術スタックを活用しています。

-   **バックエンド**: **Node.js** と **TypeScript** で構築され、**Express** フレームワークを使用しています。これにより、多数の同時接続を処理できる高性能なノンブロッキングI/Oバックエンドが提供されます。エントリーポイント `blocklets/core/api/src/index.ts` は、サービスの安定性のためにCORS、クッキーの解析、堅牢なエラーハンドリングを含む標準的なセットアップを示しています。
-   **データベース**: ユーザーデータ、APIキー、使用ログなどのローカルデータ永続化のために、**Sequelize ORM** を介して **SQLite** を利用します。この選択により、デプロイメントとメンテナンスを簡素化する軽量なファイルベースのデータベースソリューションが提供されます。
-   **フロントエンド**: 管理タスク、モニタリング、モデルテストのために **React 19** で構築された最新のユーザーインターフェースです。
-   **デプロイメント**: **Blocklet** としてパッケージ化されたAIGNE Hubは、クラウドネイティブ環境向けに設計されています。このコンテナ化されたアプローチは、異なるシステム間での一貫した動作を保証し、Blocklet Serverインスタンス上でのデプロイメント、スケーリング、管理を簡素化します。

## コアコンセプト

AIGNE Hubを効果的にデプロイし、管理するためには、これらのコアコンセプトを理解することが不可欠です。

### 統合ゲートウェイ

AIGNE Hubの基本的な設計原則は、複数の下流AIプロバイダーに対する単一のプロキシとして機能することです。アプリケーションは、希望するモデル（例：`openai/gpt-4o`）を指定してハブにリクエストを送信します。ハブはリクエストを認証し、権限とクレジットを検証した後、安全に保存されたAPIキーを使用して適切な外部プロバイダーにリクエストを転送します。これにより、すべてのAIトラフィックが一元化され、モニタリング、ロギング、制御が容易になります。

### デプロイメントシナリオ

AIGNE Hubは、さまざまなインフラストラクチャやビジネス要件に対応するため、2つの主要な運用モードをサポートしています。

#### エンタープライズセルフホスティング

これは、データとインフラストラクチャに対する最大限の制御を必要とする組織にとって理想的なシナリオです。

-   **データプライバシー**: すべてのリクエストとデータは、外部のAIプロバイダーにルーティングされる前に、自社のセキュリティ境界内で処理されます。
-   **直接請求**: AIプロバイダー（例：OpenAI、Anthropic）と直接の請求関係を維持します。AIGNE Hubは内部のコスト配分のために使用状況を追跡しますが、外部への支払いは処理しません。
-   **管理の簡素化**: 開発チームは、多様なAPIキーや認証情報を管理する必要なく、単一の内部エンドポイントに接続できます。

#### サービスプロバイダーモード

このモードは、AIGNE Hubをマルチテナントで顧客向けのAIサービスプラットフォームに変えます。

-   **クレジットベースの請求**: Payment Kitと統合して、前払いクレジットシステムを有効にします。ユーザーはクレジットを購入し、そのクレジットはAIモデルの使用状況に基づいて消費されます。
-   **カスタム価格設定**: 管理者はモデルごとにカスタムの価格レートと利益率を設定でき、実行可能なビジネスモデルを構築できます。
-   **自動オンボーディング**: システムは自動ユーザー登録をサポートしており、新規ユーザーにスタータークレジットを付与するように設定できます。

## 運用向けの主な機能

AIGNE Hubは、堅牢な運用管理とモニタリングのために設計された一連の機能を備えています。

| 機能 | 説明 |
| :--- | :--- |
| **マルチプロバイダー管理** | OpenAI、Anthropic、Google Gemini、およびOllamaを介したローカルモデルを含む8以上のAIプロバイダーのAPIキーを設定・管理するための一元的なインターフェース。 |
| **統合セキュリティ** | すべてのプロバイダーAPIキーの暗号化ストレージ。アクセスはOAuth統合と詳細なユーザー権限によって制御されます。 |
| **使用状況分析** | すべてのユーザー、モデル、プロバイダーにわたるトークン使用量、リクエスト量、コストを追跡するための包括的なダッシュボード。 |
| **柔軟な請求** | サービスプロバイダーモードでは、詳細な使用状況追跡とコスト分析ツールを備えた完全なクレジットベースの請求システムを提供します。 |
| **RESTful API** | ネットワーク上のあらゆるアプリケーションやサービスとシームレスに統合するための、標準化されたHTTPエンドポイントのセットを提供します。 |
| **内蔵プレイグラウンド** | 設定済みのモデルをリアルタイムでテストし、対話するための統合UI。トラブルシューティングと検証を支援します。 |